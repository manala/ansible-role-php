---

- name: Install - Sapis - Wheezy - Php 5.4
  hosts: wheezy
  vars:
    manala_php_version: 5
    manala_php_sapis:
      - fpm
  pre_tasks:
    - include: pre_tasks/dotdeb_wheezy.yml
  roles:
    - manala.php
  post_tasks:
    - raw: "{{ 'echo \"' ~ item|to_yaml ~ '\"|goss -g - validate' }}"
      with_items:
        - package:
            php5-fpm:
              installed: true

- name: Install - Sapis - Wheezy - Php 5.5
  hosts: wheezy
  vars:
    manala_php_version: 5
    manala_php_sapis:
      - fpm
  pre_tasks:
    - include: pre_tasks/dotdeb_wheezy_55.yml
  roles:
    - manala.php
  post_tasks:
    - raw: "{{ 'echo \"' ~ item|to_yaml ~ '\"|goss -g - validate' }}"
      with_items:
        - package:
            php5-fpm:
              installed: true

- name: Install - Sapis - Wheezy - Php 5.6
  hosts: wheezy
  vars:
    manala_php_version: 5
    manala_php_sapis:
      - fpm
  pre_tasks:
    - include: pre_tasks/dotdeb_wheezy_56.yml
  roles:
    - manala.php
  post_tasks:
    - raw: "{{ 'echo \"' ~ item|to_yaml ~ '\"|goss -g - validate' }}"
      with_items:
        - package:
            php5-fpm:
              installed: true

- name: Install - Sapis - Jessie - 7.0
  hosts: jessie
  vars:
    manala_php_version: 7.0
    manala_php_sapis:
      - fpm
  pre_tasks:
    - include: pre_tasks/dotdeb_jessie.yml
  roles:
    - manala.php
  post_tasks:
    - raw: "{{ 'echo \"' ~ item|to_yaml ~ '\"|goss -g - validate' }}"
      with_items:
        - package:
            php7.0-fpm:
              installed: true
