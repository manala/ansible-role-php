---

# Requirements
- hosts: localhost
  vars:
    manala_php_version: "{{ {'wheezy': '5', 'jessie': '7.0'}[ansible_distribution_release] }}"
  roles:
    - role: manala.php
      ignore_errors: true
  tasks:
    - assert:
        that:
          - not __manala_php_requirements_result.failed|default(false)

# Requirements - No version
- hosts: localhost
  roles:
    - role: manala.php
      ignore_errors: true
  tasks:
    - assert:
        that:
          - __manala_php_requirements_result.failed|default(false)

# Requirements - Invalid version
- hosts: localhost
  vars:
    manala_php_version: "{{ {'wheezy': '7.0', 'jessie': '5'}[ansible_distribution_release] }}"
  roles:
    - role: manala.php
      ignore_errors: true
  tasks:
    - assert:
        that:
          - __manala_php_requirements_result.failed|default(false)
