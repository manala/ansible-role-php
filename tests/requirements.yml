---

- name: Requirements
  hosts: all
  vars:
    manala_php_version: "{{ {'wheezy': '5', 'jessie': '7.0'}[ansible_distribution_release] }}"
  roles:
    - role: manala.php
      ignore_errors: true
  tasks:
    - assert:
        that:
          - not __manala_php_requirements_result.failed|default(false)

- name: Requirements - No version
  hosts: all
  roles:
    - role: manala.php
      ignore_errors: true
  tasks:
    - assert:
        that:
          - __manala_php_requirements_result.failed|default(false)

- name: Requirements - Invalid version
  hosts: all
  vars:
    manala_php_version: "{{ {'wheezy': '7.0', 'jessie': '5'}[ansible_distribution_release] }}"
  roles:
    - role: manala.php
      ignore_errors: true
  tasks:
    - assert:
        that:
          - __manala_php_requirements_result.failed|default(false)
